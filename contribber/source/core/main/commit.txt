Fixed issue causing data loss